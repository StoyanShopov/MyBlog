@using Blog.Web.ViewModels.Emails.InputModels;
@model SendEmailInputModel;
@{
    this.ViewData["Title"] = "Contact Form";
}

<header class="masthead" style="background-image: url('https://static1.bigstockphoto.com/4/0/2/large1500/204910300.jpg')
">
    <div class="overlay"></div>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-md-10 mx-auto">
                <div class="page-heading">
                    <h1>Contact Me</h1>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Main Content -->
<div class="container">
    <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
            <p>Want to get in touch? Fill out the form below to send me a message and I will get back to you as soon as possible!</p>
            <form method="post" id="emailForm">
            </form>
                <div class="form-group">
                    <div class="form-group floating-label-form-group">
                        <label asp-for="Name"></label>
                        <input asp-for="Name" id="name" class="form-control" placeholder="Name">
                        <span asp-validation-for="Name"></span>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-group floating-label-form-group">
                        <label asp-for="Email"></label>
                        <input asp-for="Email" id="email" class="form-control" placeholder="Email">
                        <span asp-validation-for="Email"></span>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-group floating-label-form-group">
                        <label asp-for="Subject"></label>
                        <input asp-for="Subject" id="subject" class="form-control" placeholder="Subject">
                        <span asp-validation-for="Subject"></span>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-group floating-label-form-group">
                        <label asp-for="Message"></label>
                        <textarea asp-for="Message" id="message" class="form-control" placeholder="Message"></textarea>
                        <span asp-validation-for="Message"></span>
                    </div>
                </div>
                <br>
            <div class="form-group">
                <button onclick="sendEmail()" class="btn btn-primary btn-lg btn-block">Send</button>
            </div>
        </div>
    </div>
</div>
<hr>

@section Scripts {
    <script>
        function sendEmail() {
            var token = $("#emailForm input[name=__RequestVerificationToken]").val();

            var json =
            {
                name: $("#name").val(),
                email: $("#email").val(),
                subject: $("#subject").val(),
                message: $("#message").val()
            };

            $.ajax({
                url: '/api/likes',
                type: "POST",
                data: JSON.stringify(json),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                headers: { 'X-CSRF-TOKEN': token },
                success: function (result) {
                    console.log(result);
                }
            });
        };
    </script>
}